(()=>{"use strict";class e{constructor(e,t,s,i,n,o,r){this._name=e.name,this._link=e.link,this._likeNumber=e.likes,this._userId=t._id,this._ownerId=e.owner._id,this._cardId=e._id,this._templateSelector=s,this._clickImageHandle=i,this._deleteCard=n,this._likeCard=o,this._dislikeCard=r}generateCard=()=>(this._cardElement=document.querySelector(this._templateSelector).content.cloneNode(!0),this._like=this._cardElement.querySelector(".element__like-photo"),this._likeNumberElement=this._cardElement.querySelector(".element__like-number"),this._title=this._cardElement.querySelector(".element__title"),this._image=this._cardElement.querySelector(".element__img"),this._delete=this._cardElement.querySelector(".element__delete-card"),this._fillCard(),this._setEventHandlers(),this._cardElement);_addLikeCard=()=>{this._likeCard(this,this._cardId)};likeElement(e){this._likeNumberElement.textContent=e.likes.length,this._likeNumber=e.likes,this._like.classList.add("element__like-photo_active")}_removeLikeCard=()=>{this._dislikeCard(this,this._cardId)};dislikeElement(e){this._like.classList.remove("element__like-photo_active"),this._likeNumberElement.textContent=e.likes.length,this._likeNumber=e.likes}_isLike=()=>this._likeNumber.find((e=>e._id===this._userId));_isYouCard(){return this._ownerId===this._userId}_likeCardForUser(){this._isLike()?this._removeLikeCard():this._addLikeCard()}deleteCardElement(){this._delete.closest(".element").remove()}_setEventHandlers=()=>{this._delete.addEventListener("click",(()=>this._deleteCard(this,this._cardId))),this._like.addEventListener("click",(()=>this._likeCardForUser())),this._image.addEventListener("click",(()=>this._clickImageHandle(this._name,this._link)))};_fillCard=()=>{this._isLike()?this._like.classList.add("element__like-photo_active"):this._like.classList.remove("element__like-photo_active"),!1===this._isYouCard()&&this._cardElement.getElementById("element__delete-card").remove(),this._likeNumberElement.textContent=this._likeNumber.length,this._image.src=this._link,this._image.alt=this._name,this._title.textContent=this._name}}const t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_disabled",activeButtonClass:"popup__button-save_active",inputErrorClass:"popup__input_type_error",errorClass:"error"};class s{constructor(e,t){this._formElement=e,this._validationConfig=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._validationConfig.inputSelector)),this._buttonElement=this._formElement.querySelector(this._validationConfig.submitButtonSelector)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_showInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._validationConfig.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._validationConfig.errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.errorClass),t.textContent=""};_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.remove(this._validationConfig.activeButtonClass),this._buttonElement.classList.add(this._validationConfig.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._validationConfig.inactiveButtonClass),this._buttonElement.classList.add(this._validationConfig.activeButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class i{constructor({items:e,renderer:t},s){this._renderedArray=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._renderedArray.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}class n{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.code&&this.close()}_handleOverlayClose(e){e.currentTarget===e.target&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close").addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>this._handleOverlayClose(e)))}}class o extends n{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=Array.from(this._form.querySelectorAll(".popup__input")),this._buttonSave=this._popup.querySelector(".popup__button-save"),this._buttonSaveEnit=this._buttonSave.textContent}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}renameButtonSave(){this._buttonSave.textContent="Сохранение..."}close(){super.close(),this._form.reset(),this._buttonSave.textContent=this._buttonSaveEnit}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const r=document.querySelector(".popup_type_edit-profile"),a=r.querySelector(".popup__input_type_name"),l=r.querySelector(".popup__input_type_job"),_=document.querySelector(".popup_type_add-card"),h=document.querySelector(".popup_type_edit-avatar"),d=r.querySelector("#editForm"),c=_.querySelector("#addForm"),p=h.querySelector("#editAvatar"),u=document.querySelector(".profile__edit-profile"),m=document.querySelector(".profile__add-button"),v=document.querySelector(".profile__edit-avatar"),f=new class{constructor(e){this._options=e}_getResponseData(e){return e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)}getUserInfo(){return fetch(this._options.baseUrl+"/users/me",{headers:this._options.headers}).then((e=>this._getResponseData(e)))}getInitialCards(){return fetch(this._options.baseUrl+"/cards",{headers:this._options.headers}).then((e=>this._getResponseData(e)))}setEditUserInfo(e){return fetch(this._options.baseUrl+"/users/me",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:e.nameInput,about:e.jobInput})}).then((e=>this._getResponseData(e)))}setNewCard(e){return fetch(this._options.baseUrl+"/cards",{method:"POST",headers:this._options.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>this._getResponseData(e)))}addLike(e){return fetch(this._options.baseUrl+"/cards/"+e+"/likes",{method:"PUT",headers:this._options.headers}).then((e=>this._getResponseData(e)))}deleeteLike(e){return fetch(this._options.baseUrl+"/cards/"+e+"/likes",{method:"DELETE",headers:this._options.headers}).then((e=>this._getResponseData(e)))}deleeteCardMetod(e){return fetch(this._options.baseUrl+"/cards/"+e,{method:"DELETE",headers:this._options.headers}).then((e=>this._getResponseData(e)))}setEditAvatar(e){return fetch(this._options.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e.AvatarInput})}).then((e=>this._getResponseData(e)))}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"dcf4edee-ca14-49b3-93d1-3710d22ba9f3","Content-Type":"application/json"}}),E=new s(d,t);E.enableValidation();const g=new s(c,t);g.enableValidation();const C=new s(p,t);let k;C.enableValidation();const y=new class extends n{constructor(e){super(e),this._popupImageImg=this._popup.querySelector(".popup__img"),this._popupImageTitle=this._popup.querySelector(".popup__img-title")}open(e,t){super.open(),this._popupImageImg.src=t,this._popupImageImg.alt=e,this._popupImageTitle.textContent=e}close(){super.close(),this._popupImageImg.src="",this._popupImageImg.alt="",this._popupImageTitle.textContent=""}}(".popup_type_img");y.setEventListeners();const b=new class{constructor({name:e,info:t,avatar:s}){this._name=document.querySelector(e),this._info=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{user:this._name.textContent,info:this._info.textContent,_id:this._id,avatar:this._avatar.src}}setUserInfo(e,t,s,i){this._id=s,this._name.textContent=e,this._info.textContent=t,this._avatar.src=i}setUserAvatar(e){this._avatar.src=e}}({name:".profile__name",info:".profile__job",avatar:".profile__avatar"});f.getUserInfo().then((e=>{console.log(e),b.setUserInfo(e.name,e.about,e._id,e.avatar),b.setUserAvatar(e.avatar)})).catch((e=>{console.log(e)})),f.getInitialCards().then((e=>{console.log(e),k=new i({items:e.reverse(),renderer:U},".elements"),k.renderItems()})).catch((e=>{console.log(e)}));const I=new class extends n{constructor(e){super(e),this._button=this._popup.querySelector(".popup__button-save")}open(e){super.open(),this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._button.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmit()}))}}(".popup_type_delete");I.setEventListeners();const S=new o(".popup_type_edit-profile",(function(e){const{_id:t,avatar:s}=b.getUserInfo();S.renameButtonSave(),f.setEditUserInfo(e).then((()=>{b.setUserInfo(e.nameInput,e.jobInput,t,s)})).catch((e=>{console.log(e)})).finally((()=>{S.close()}))}));S.setEventListeners(),u.addEventListener("click",(()=>{const{info:e,user:t}=b.getUserInfo();a.value=t,l.value=e,E.resetValidation(),S.open()}));const L=new o(".popup_type_edit-avatar",(function(e){L.renameButtonSave(),f.setEditAvatar(e).then((()=>{b.setUserAvatar(e.AvatarInput)})).catch((e=>{console.log(e)})).finally((()=>{L.close()}))}));L.setEventListeners(),v.addEventListener("click",(()=>{C.resetValidation(),L.open()}));const q=new o(".popup_type_add-card",(function(e){const t=e.imgInput,s=e.linkInput;q.renameButtonSave(),f.setNewCard({name:t,link:s}).then((e=>{const t=U(e);k.addItem(t)})).catch((e=>{console.log(e)})).finally((()=>{q.close()}))}));function U(t){return new e(t,b.getUserInfo(),".element-template",A,w,x,B).generateCard()}function w(e,t){I.open((()=>{f.deleeteCardMetod(t).then((()=>{e.deleteCardElement(),I.close()})).catch((e=>{console.log(e)}))}))}function x(e,t){f.addLike(t).then((t=>{e.likeElement(t)})).catch((e=>{console.log(e)}))}function B(e,t){f.deleeteLike(t).then((t=>{e.dislikeElement(t)})).catch((e=>{console.log(e)}))}function A(e,t){y.open(e,t)}q.setEventListeners(),m.addEventListener("click",(()=>{g.resetValidation(),q.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUFJRSxFQUFJLElBRWpCVSxTQUFRLEtBQ1BFLEVBQWEvRixPQUFPLEdBRXhCLElBU0EsU0FBU3NGLEVBQVdwRSxHQUVsQixPQURhLElBQUluSSxFQUFLbUksRUFBT3VELEVBQVM5QixjQUFlLG9CQUFxQndELEVBQWlCOU0sRUFBWUMsRUFBVUMsR0FBYWtCLGNBRWhJLENBR0EsU0FBU3BCLEVBQVcrTSxFQUFNcE0sR0FDcEJ1TCxFQUFnQnhGLE1BQUssS0FDbkJrQyxFQUFJNEIsaUJBQWlCN0osR0FBSytJLE1BQUssS0FFN0JxRCxFQUFLL0osb0JBQ0xrSixFQUFnQnZGLE9BQU8sSUFFeEJrRixPQUFPQyxJQUNOSCxRQUFRQyxJQUFJRSxFQUFJLEdBQUUsR0FFeEIsQ0FJSixTQUFTN0wsRUFBUzhNLEVBQUtwTSxHQUNwQmlJLEVBQUl5QixRQUFRMUosR0FBSytJLE1BQU12SCxJQUVsQjRLLEVBQUs3SyxZQUFZQyxFQUFTLElBRTNCMEosT0FBT0MsSUFDTkgsUUFBUUMsSUFBSUUsRUFBSSxHQUN4QixDQUdBLFNBQVM1TCxFQUFZNk0sRUFBS3BNLEdBQ3hCaUksRUFBSTJCLFlBQVk1SixHQUFLK0ksTUFBTXZILElBRXRCNEssRUFBS3RLLGVBQWVOLEVBQVMsSUFFOUIwSixPQUFPQyxJQUNOSCxRQUFRQyxJQUFJRSxFQUFJLEdBQ3ZCLENBSUEsU0FBU2dCLEVBQWlCek0sRUFBS0UsR0FDN0IwSyxFQUFhdkUsS0FBS3JHLEVBQU1FLEVBQzFCLENBckVBbU0sRUFBYXhGLG9CQW1CYndCLEVBQWN4RixpQkFBaUIsU0FBUyxLQUN0QzRILEVBQXFCdkcsa0JBQ3JCbUksRUFBYWhHLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy92YWxpZGF0aW9uQ29uZmlnLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHVzZXIsIHRlbXBsYXRlU2VsZWN0b3IsIGNsaWNrSW1hZ2VIYW5kbGUsIGRlbGV0ZUNhcmQsIGxpa2VDYXJkLCBkaXNsaWtlQ2FyZCkge1xyXG4gICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lXHJcbiAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbmtcclxuICAgICAgdGhpcy5fbGlrZU51bWJlciA9IGRhdGEubGlrZXNcclxuICAgICAgdGhpcy5fdXNlcklkID0gdXNlci5faWRcclxuICAgICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkXHJcbiAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkXHJcbiAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yXHJcbiAgICAgIHRoaXMuX2NsaWNrSW1hZ2VIYW5kbGUgPSBjbGlja0ltYWdlSGFuZGxlXHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQgPSBkZWxldGVDYXJkXHJcbiAgICAgIHRoaXMuX2xpa2VDYXJkID0gbGlrZUNhcmRcclxuICAgICAgdGhpcy5fZGlzbGlrZUNhcmQgPSBkaXNsaWtlQ2FyZFxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpXHJcbiAgICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtcGhvdG9cIilcclxuICAgICAgdGhpcy5fbGlrZU51bWJlckVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtbnVtYmVyXCIpXHJcbiAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKVxyXG4gICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1nXCIpXHJcbiAgICAgIHRoaXMuX2RlbGV0ZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWNhcmRcIikgIFxyXG4gICAgICB0aGlzLl9maWxsQ2FyZCgpXHJcbiAgICAgIHRoaXMuX3NldEV2ZW50SGFuZGxlcnMoKVxyXG4gICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgIH1cclxuICBcclxuICAgIF9hZGRMaWtlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5fbGlrZUNhcmQodGhpcywgdGhpcy5fY2FyZElkKVxyXG4gICAgfVxyXG5cclxuICAgIGxpa2VFbGVtZW50KGNhcmREYXRhKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VOdW1iZXJFbGVtZW50LnRleHRDb250ZW50ID0gY2FyZERhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgICB0aGlzLl9saWtlTnVtYmVyID0gY2FyZERhdGEubGlrZXM7XHJcbiAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2UtcGhvdG9fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVMaWtlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5fZGlzbGlrZUNhcmQodGhpcywgdGhpcy5fY2FyZElkKVxyXG4gICAgfVxyXG5cclxuICAgIGRpc2xpa2VFbGVtZW50KGNhcmREYXRhKSB7XHJcbiAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2xpa2UtcGhvdG9fYWN0aXZlXCIpO1xyXG4gICAgICB0aGlzLl9saWtlTnVtYmVyRWxlbWVudC50ZXh0Q29udGVudCA9IGNhcmREYXRhLmxpa2VzLmxlbmd0aDsgXHJcbiAgICAgIHRoaXMuX2xpa2VOdW1iZXIgPSBjYXJkRGF0YS5saWtlcztcclxuICAgIH1cclxuXHJcbiAgICBfaXNMaWtlID0gKCkgPT4ge3JldHVybiB0aGlzLl9saWtlTnVtYmVyLmZpbmQoKGVsZW1lbnRJZCkgPT4gZWxlbWVudElkLl9pZCA9PT0gdGhpcy5fdXNlcklkKX1cclxuICAgIF9pc1lvdUNhcmQoKSB7XHJcbiAgICAgIGlmICh0aGlzLl9vd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2xpa2VDYXJkRm9yVXNlciAoKSB7XHJcbiAgICAgICBpZiAodGhpcy5faXNMaWtlKCkpIHsgXHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlrZUNhcmQoKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2FkZExpa2VDYXJkKClcclxuICAgICAgfSBcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkRWxlbWVudCgpe1xyXG4gICAgICB0aGlzLl9kZWxldGUuY2xvc2VzdChcIi5lbGVtZW50XCIpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX3NldEV2ZW50SGFuZGxlcnMgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gXHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQodGhpcywgdGhpcy5fY2FyZElkKSlcclxuICAgICAgdGhpcy5fbGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fbGlrZUNhcmRGb3JVc2VyKCkpXHJcbiAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICAgIHRoaXMuX2NsaWNrSW1hZ2VIYW5kbGUodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgICAgKVxyXG4gICAgfVxyXG4gIFxyXG4gICAgX2ZpbGxDYXJkID0gKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faXNMaWtlKCkpIHtcclxuICAgICAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2UtcGhvdG9fYWN0aXZlXCIpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2xpa2UtcGhvdG9fYWN0aXZlXCIpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgIGlmICh0aGlzLl9pc1lvdUNhcmQoKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBkZWxldGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VsZW1lbnRfX2RlbGV0ZS1jYXJkJyk7XHJcbiAgICAgICAgZGVsZXRlRWxlbWVudC5yZW1vdmUoKVxyXG4gICAgICB9IFxyXG4gICAgICBcclxuICAgICAgdGhpcy5fbGlrZU51bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlTnVtYmVyLmxlbmd0aFxyXG4gICAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rXHJcbiAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWVcclxuICAgICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCB7Q2FyZH07IiwiY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uLXNhdmUnLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tc2F2ZV9kaXNhYmxlZCcsXHJcbiAgICBhY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tc2F2ZV9hY3RpdmUnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ2Vycm9yJ1xyXG4gIH07XHJcbiAgXHJcbiAgZXhwb3J0IHt2YWxpZGF0aW9uQ29uZmlnfSIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yIChmb3JtRWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZykge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxyXG4gICAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWdcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gICAgXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9O1xyXG4gIFxyXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9O1xyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlXHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlXHJcbiAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAgIGV4cG9ydCB7Rm9ybVZhbGlkYXRvcn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBcnJheSA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7Y29uc3QgcmVuZGVyQ2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbShyZW5kZXJDYXJkKTt9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZihldnQuY29kZSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVPdmVybGF5Q2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV0l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU2F2ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1zYXZlXCIpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvblNhdmVFbml0ID0gdGhpcy5fYnV0dG9uU2F2ZS50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuYW1lQnV0dG9uU2F2ZSgpIHtcclxuICAgICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgICB0aGlzLl9idXR0b25TYXZlLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uU2F2ZUVuaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0LrQvtC90YHRgtCw0L3RgiDQtNC70Y8gUE9QLVVQINC40LfQvNC10L3QtdC90LjRjyDQv9GA0L7RhNC40LvRjzpcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIik7XHJcblxyXG4vLyDQntCx0YrRj9Cy0LvQtdC90LjQtSDQutC+0L3RgdGC0LDQvdGCINC00LvRjyDQv9C+0LvQtdC5INCy0LLQvtC00LAgUE9QLVVQINC40LfQvNC10L3QtdC90LjRjyDQv9GA0L7RhNC40LvRjzpcclxuY29uc3QgcG9wdXBOYW1lID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IHBvcHVwSm9iID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2pvYlwiKTtcclxuXHJcbi8vINCe0LHRitGP0LLQu9C10L3QuNC1INC60L7QvdGB0YLQsNC90YIg0LTQu9GPIFBPUC1VUCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4OlxyXG5jb25zdCBwb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIik7XHJcblxyXG4vLyDQntCx0YrRj9Cy0LvQtdC90LjQtSDQutC+0L3RgdGC0LDQvdGCINC00LvRjyBQT1AtVVAg0LjQt9C80LXQvdC10L3QuNGPINCw0LLQsNGC0LDRgNCwOlxyXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXJcIik7XHJcblxyXG4vLyDQntCx0YrRj9Cy0LvQtdC90LjQtSDQutC+0L3RgdGC0LDQvdGCINC00LvRjyDRhNC+0YDQvDpcclxuY29uc3QgZm9ybUVkaXRQcm9maWxlID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI2VkaXRGb3JtXCIpO1xyXG5jb25zdCBmb3JtQ2FyZE5ldyA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKFwiI2FkZEZvcm1cIik7XHJcbmNvbnN0IGZvcm1FZGl0QXZhdGFyID0gcG9wdXBFZGl0QXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdEF2YXRhclwiKTtcclxuXHJcbi8vINCe0LHRitGP0LLQu9C10L3QuNC1INC60L7QvdGB0YLQsNC90YIg0LTQu9GPINC60L3QvtC/0L7QujpcclxuY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtcHJvZmlsZVwiKTtcclxuY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYnV0dG9uRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1hdmF0YXJcIik7XHJcblxyXG5leHBvcnQgeyBwb3B1cE5hbWUsIHBvcHVwSm9iLCBmb3JtRWRpdFByb2ZpbGUsIGZvcm1DYXJkTmV3LCBidXR0b25FZGl0UHJvZmlsZSwgYnV0dG9uQWRkQ2FyZCwgYnV0dG9uRWRpdEF2YXRhcixmb3JtRWRpdEF2YXRhciB9IiwiLy8g0JjQvNC/0L7RgNGC0YtcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuLy9pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi91dGlscy9pbml0aWFsQ2FyZHMuanMnO1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdJdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24nO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7cG9wdXBOYW1lLFxyXG4gICAgICAgIHBvcHVwSm9iLFxyXG4gICAgICAgIGZvcm1FZGl0UHJvZmlsZSxcclxuICAgICAgICBmb3JtQ2FyZE5ldyxcclxuICAgICAgICBidXR0b25FZGl0UHJvZmlsZSxcclxuICAgICAgICBidXR0b25BZGRDYXJkLFxyXG4gICAgICAgIGJ1dHRvbkVkaXRBdmF0YXIsXHJcbiAgICAgICAgZm9ybUVkaXRBdmF0YXJ9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBBUEk6XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MCcsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2RjZjRlZGVlLWNhMTQtNDliMy05M2QxLTM3MTBkMjJiYTlmMycsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCB7YXBpfVxyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRQcm9maWxlLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuZm9ybVByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXHJcblxyXG5jb25zdCBmb3JtQWRkQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1DYXJkTmV3LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuZm9ybUFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXHJcblxyXG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdEF2YXRhciwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXHJcblxyXG4vL9Cd0L7QstCw0Y8g0YHQtdC60YbQuNGPOlxyXG5sZXQgY29udGVudENhcmRzIFxyXG5cclxuLy/QntGC0LrRgNGL0YLQuNC1INCx0L7Qu9GM0YjQvtC5INC60LDRgNGC0LjQvdC60Lg6IFxyXG5jb25zdCBvcGVuQmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWdcIik7XHJcbm9wZW5CaWdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG4vL9CY0L3RhNC+0YDQvNCw0YbQuNGPINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtTpcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgaW5mbzogJy5wcm9maWxlX19qb2InLFxyXG4gIGF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInXHJcbn0pO1xyXG5cclxuLy8g0JjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1OlxyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKCh1c2VySW5mb0FwaSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKHVzZXJJbmZvQXBpKVxyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJJbmZvQXBpLm5hbWUsIHVzZXJJbmZvQXBpLmFib3V0LCB1c2VySW5mb0FwaS5faWQsIHVzZXJJbmZvQXBpLmF2YXRhcilcclxuICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJJbmZvQXBpLmF2YXRhcilcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICBjb25zb2xlLmxvZyhlcnIpfSk7XHJcblxyXG4vLyDQmNC90YTQvtGA0LzQsNGG0LjRjyDQviDQutCw0YDRgtC+0YfQutCw0YU6XHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKCjRgWFyZHNBcGkpID0+IHtcclxuICBjb25zb2xlLmxvZyjRgWFyZHNBcGkpXHJcbiAgY29udGVudENhcmRzID0gbmV3IFNlY3Rpb24gKHsgaXRlbXM60YFhcmRzQXBpLnJldmVyc2UoKSAsIHJlbmRlcmVyOiBjcmVhdGVDYXJkIH0sIFwiLmVsZW1lbnRzXCIgKTtcclxuICBjb250ZW50Q2FyZHMucmVuZGVySXRlbXMoKVxyXG59KVxyXG4uY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycil9KTtcclxuXHJcbi8v0KTQvtGA0LzQsCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lg6IFxyXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiLnBvcHVwX3R5cGVfZGVsZXRlXCIpO1xyXG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5leHBvcnQge3BvcHVwRGVsZXRlQ2FyZH1cclxuXHJcbi8v0KTQvtGA0LzQsCBFZGl0OiBcclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBQb3B1cFdJdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCIsIHN1Ym1pdFByb2ZpbGVGb3JtKTtcclxucG9wdXBFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5idXR0b25FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHtpbmZvLCB1c2VyfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICBwb3B1cE5hbWUudmFsdWUgPSB1c2VyXHJcbiAgcG9wdXBKb2IudmFsdWUgPSBpbmZvXHJcbiAgZm9ybVByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKClcclxuICBwb3B1cEVkaXRGb3JtLm9wZW4oKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gc3VibWl0UHJvZmlsZUZvcm0oaW5wdXRWYWx1ZXMpIHtcclxuICBjb25zdCB7X2lkLCBhdmF0YXJ9ID0gIHVzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICBwb3B1cEVkaXRGb3JtLnJlbmFtZUJ1dHRvblNhdmUoKVxyXG4gIGFwaS5zZXRFZGl0VXNlckluZm8oaW5wdXRWYWx1ZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMubmFtZUlucHV0ICwgaW5wdXRWYWx1ZXMuam9iSW5wdXQsIF9pZCwgYXZhdGFyKVxyXG4gIH0pXHJcblxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpfSlcclxuICBcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwb3B1cEVkaXRGb3JtLmNsb3NlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8v0KTQvtGA0LzQsCBBdmF0YXI6IFxyXG5cclxuY29uc3QgcG9wdXBFZGl0QXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdJdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXJcIiwgc3VibWl0QXZhdGFyRm9ybSk7XHJcbnBvcHVwRWRpdEF2YXRhckZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuYnV0dG9uRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZvcm1BdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKClcclxuICBwb3B1cEVkaXRBdmF0YXJGb3JtLm9wZW4oKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gc3VibWl0QXZhdGFyRm9ybShpbnB1dFZhbHVlcykge1xyXG4gIHBvcHVwRWRpdEF2YXRhckZvcm0ucmVuYW1lQnV0dG9uU2F2ZSgpXHJcbiAgYXBpLnNldEVkaXRBdmF0YXIoaW5wdXRWYWx1ZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlcy5BdmF0YXJJbnB1dClcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpfSlcclxuXHJcbiAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgcG9wdXBFZGl0QXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vL9Ck0L7RgNC80LAgQWRkOiBcclxuY29uc3QgcG9wdXBBZGRGb3JtID0gbmV3IFBvcHVwV0l0aEZvcm0gKCBcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIHN1Ym1pdENhcmRGb3JtICk7XHJcbnBvcHVwQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5mdW5jdGlvbiBzdWJtaXRDYXJkRm9ybShpbnB1dFZhbHVlcykge1xyXG4gIGNvbnN0IG5hbWUgPSBpbnB1dFZhbHVlcy5pbWdJbnB1dFxyXG4gIGNvbnN0IGxpbmsgPSBpbnB1dFZhbHVlcy5saW5rSW5wdXRcclxuICBwb3B1cEFkZEZvcm0ucmVuYW1lQnV0dG9uU2F2ZSgpXHJcbiAgYXBpLnNldE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgIGNvbnRlbnRDYXJkcy5hZGRJdGVtKG5ld0NhcmQpXHJcbiAgfSlcclxuICBcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKX0pXHJcblxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHBvcHVwQWRkRm9ybS5jbG9zZSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5idXR0b25BZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybUFkZENhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKClcclxuICBwb3B1cEFkZEZvcm0ub3BlbigpXHJcbn0pXHJcblxyXG4vLyDQntGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQujpcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQodmFsdWUpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQodmFsdWUsIHVzZXJJbmZvLmdldFVzZXJJbmZvKCksIFwiLmVsZW1lbnQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZENsaWNrLCBkZWxldGVDYXJkLCBsaWtlQ2FyZCwgZGlzbGlrZUNhcmQpLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkXHJcbn1cclxuXHJcbi8vINCj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuDpcclxuZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkLCBfaWQpe1xyXG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigoKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGVldGVDYXJkTWV0b2QoX2lkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIC8vY29uc29sZS5sb2coY2FyZERhdGEpXHJcbiAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmRFbGVtZW50KClcclxuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycil9KTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbi8v0JvQsNC50Log0LrQsNGA0YLQvtGH0LrQuDpcclxuXHJcbmZ1bmN0aW9uIGxpa2VDYXJkKGNhcmQsX2lkKXtcclxuICAgYXBpLmFkZExpa2UoX2lkKS50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coY2FyZERhdGEpXHJcbiAgICAgICAgY2FyZC5saWtlRWxlbWVudChjYXJkRGF0YSlcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpfSk7XHJcbn1cclxuXHJcbi8v0JTQuNC30LvQsNC50Log0LrQsNGA0YLQvtGH0LrQuDpcclxuZnVuY3Rpb24gZGlzbGlrZUNhcmQoY2FyZCxfaWQpe1xyXG4gIGFwaS5kZWxlZXRlTGlrZShfaWQpLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAvL2NvbnNvbGUubG9nKGNhcmREYXRhKVxyXG4gICAgICAgY2FyZC5kaXNsaWtlRWxlbWVudChjYXJkRGF0YSlcclxuICAgICB9KVxyXG4gICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICBjb25zb2xlLmxvZyhlcnIpfSk7XHJcbn1cclxuXHJcblxyXG4vLyDQntGC0LrRgNGL0YLQuNC1INCx0L7Qu9GM0YjQvtC5INC60LDRgNGC0LjQvdC60Lg6XHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayAobmFtZSxsaW5rKSB7XHJcbiAgb3BlbkJpZ0ltYWdlLm9wZW4obmFtZSwgbGluaylcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcclxuICB9XHJcblxyXG4gIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxufSBcclxuXHJcbiAgLy/QnNC10YLQvtC0INC00LvRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LU6XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goIHRoaXMuX29wdGlvbnMuYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcclxuICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICB9KVxyXG4gIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbn1cclxuXHJcbi8v0JzQtdGC0L7QtCDQtNC70Y8g0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQuiDQvNCw0YHRgdC40LLRgyDQutCw0YDRgtC+0YfQtdC6OlxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCggdGhpcy5fb3B0aW9ucy5iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICAgfSlcclxuICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4vLyDQnNC10YLQvtC0INC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQtNCw0L3QvdGL0YUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1OlxyXG4gIHNldEVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgcmV0dXJuIGZldGNoKHRoaXMuX29wdGlvbnMuYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcclxuICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgIG5hbWU6IGRhdGEubmFtZUlucHV0LFxyXG4gICAgYWJvdXQ6IGRhdGEuam9iSW5wdXRcclxuICB9KVxyXG4gIH0pXHJcbiAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIC8vINCc0LXRgtC+0LQg0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQvdCwINGB0LXRgNCy0LXRgDpcclxuICBzZXROZXdDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0JzQtdGC0L7QtCDQtNC70Y8g0L/QvtGB0YLQsNC90L7QstC60Lgg0LvQsNC50LrQvtCyOlxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsICsgXCIvY2FyZHMvXCIgKyBjYXJkSWQgKyBcIi9saWtlc1wiLCB7XHJcbiAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0JzQtdGC0L7QtCDQtNC70Y8g0YHQvdGP0YLQuNGPINC70LDQudC60L7QsjpcclxuICBkZWxlZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwgKyBcIi9jYXJkcy9cIiArIGNhcmRJZCArIFwiL2xpa2VzXCIsIHtcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INC00LvRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60Lg6XHJcbiAgZGVsZWV0ZUNhcmRNZXRvZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwgKyBcIi9jYXJkcy9cIiArIGNhcmRJZCAsIHtcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/QnNC10YLQvtC0INC00LvRjyDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LA6XHJcbiAgc2V0RWRpdEF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsICsgXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYXZhdGFyOiBkYXRhLkF2YXRhcklucHV0XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlciAocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2VJbWcgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nLXRpdGxlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlSW1nLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZUltZy5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlSW1nLnNyYyA9ICcnO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2VJbWcuYWx0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9XHJcbiAgICBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSAsIGluZm8gLCBhdmF0YXIgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGluZm8pO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgdXNlcjogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgaW5mbzogdGhpcy5faW5mby50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgX2lkOiB0aGlzLl9pZCxcclxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyggbmFtZSAsIGluZm8sIF9pZCwgYXZhdGFyICkge1xyXG4gICAgICAgIHRoaXMuX2lkID0gX2lkXHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5faW5mby50ZXh0Q29udGVudCA9IGluZm87XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhciApIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tc2F2ZScpO1xyXG4gICAgfVxyXG4gICAgb3BlbihoYW5kbGVTdWJtaXQpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInVzZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiY2xpY2tJbWFnZUhhbmRsZSIsImRlbGV0ZUNhcmQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlTnVtYmVyIiwibGlrZXMiLCJfdXNlcklkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9jYXJkSWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9jbGlja0ltYWdlSGFuZGxlIiwiX2RlbGV0ZUNhcmQiLCJfbGlrZUNhcmQiLCJfZGlzbGlrZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2UiLCJfbGlrZU51bWJlckVsZW1lbnQiLCJfdGl0bGUiLCJfaW1hZ2UiLCJfZGVsZXRlIiwiX2ZpbGxDYXJkIiwiX3NldEV2ZW50SGFuZGxlcnMiLCJfYWRkTGlrZUNhcmQiLCJsaWtlRWxlbWVudCIsImNhcmREYXRhIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJhZGQiLCJfcmVtb3ZlTGlrZUNhcmQiLCJkaXNsaWtlRWxlbWVudCIsInJlbW92ZSIsIl9pc0xpa2UiLCJmaW5kIiwiZWxlbWVudElkIiwiX2lzWW91Q2FyZCIsIl9saWtlQ2FyZEZvclVzZXIiLCJkZWxldGVDYXJkRWxlbWVudCIsImNsb3Nlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJhbHQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl92YWxpZGF0aW9uQ29uZmlnIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsInJlc2V0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZWRBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJyZW5kZXJDYXJkIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjb2RlIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV0l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2J1dHRvblNhdmUiLCJfYnV0dG9uU2F2ZUVuaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZW5hbWVCdXR0b25TYXZlIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cE5hbWUiLCJwb3B1cEpvYiIsInBvcHVwQWRkQ2FyZCIsInBvcHVwRWRpdEF2YXRhciIsImZvcm1FZGl0UHJvZmlsZSIsImZvcm1DYXJkTmV3IiwiZm9ybUVkaXRBdmF0YXIiLCJidXR0b25FZGl0UHJvZmlsZSIsImJ1dHRvbkFkZENhcmQiLCJidXR0b25FZGl0QXZhdGFyIiwiYXBpIiwib3B0aW9ucyIsIl9vcHRpb25zIiwiX2dldFJlc3BvbnNlRGF0YSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwic2V0RWRpdFVzZXJJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lSW5wdXQiLCJhYm91dCIsImpvYklucHV0Iiwic2V0TmV3Q2FyZCIsImFkZExpa2UiLCJjYXJkSWQiLCJkZWxlZXRlTGlrZSIsImRlbGVldGVDYXJkTWV0b2QiLCJzZXRFZGl0QXZhdGFyIiwiYXZhdGFyIiwiQXZhdGFySW5wdXQiLCJhdXRob3JpemF0aW9uIiwiZm9ybVByb2ZpbGVWYWxpZGF0b3IiLCJmb3JtQWRkQ2FyZFZhbGlkYXRvciIsImZvcm1BdmF0YXJWYWxpZGF0b3IiLCJjb250ZW50Q2FyZHMiLCJvcGVuQmlnSW1hZ2UiLCJfcG9wdXBJbWFnZUltZyIsIl9wb3B1cEltYWdlVGl0bGUiLCJ1c2VySW5mbyIsImluZm8iLCJfaW5mbyIsIl9hdmF0YXIiLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJ1c2VySW5mb0FwaSIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsItGBYXJkc0FwaSIsInJldmVyc2UiLCJjcmVhdGVDYXJkIiwicG9wdXBEZWxldGVDYXJkIiwiX2J1dHRvbiIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJwb3B1cEVkaXRGb3JtIiwiaW5wdXRWYWx1ZXMiLCJmaW5hbGx5IiwicG9wdXBFZGl0QXZhdGFyRm9ybSIsInBvcHVwQWRkRm9ybSIsImltZ0lucHV0IiwibGlua0lucHV0IiwibmV3Q2FyZCIsImhhbmRsZUNhcmRDbGljayIsImNhcmQiXSwic291cmNlUm9vdCI6IiJ9